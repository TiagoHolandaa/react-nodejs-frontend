{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiago - DARM\\\\Documents\\\\GitHub\\\\react-nodejs-frontend\\\\src\\\\pages\\\\MainPage\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { AuthContext } from '../../contexts/auth';\nimport Nav from './Nav';\nimport Search from './Search';\nimport Repositories from './Repositories';\nimport { getRepositories, createRepository, destroyRepository } from '../../services/api';\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MainPage = () => {\n  _s();\n\n  const {\n    user,\n    logout\n  } = useContext(AuthContext);\n  const [repositories, setRepositories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingError, setLoadingError] = useState(false);\n\n  const loadData = async function () {\n    let query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n    try {\n      setLoading(true);\n      const response = await getRepositories(user === null || user === void 0 ? void 0 : user.id, query);\n      setRepositories(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error(error);\n      setLoadingError(true);\n    }\n  };\n  /* useEffect(() => {\r\n      (async () => await loadData())();\r\n  }, []) */\n\n\n  const handlelogout = () => {\n    console.log(\"logout\");\n    logout();\n  };\n\n  const handleSearch = query => {\n    loadData(query);\n  };\n\n  const handleDeleteRepo = async repository => {\n    console.log(\"delete repo\", repository);\n    await destroyRepository(user === null || user === void 0 ? void 0 : user.id, repository._id);\n    await loadData();\n  };\n\n  const handleNewRepo = async url => {\n    console.log(\"new repo\", url);\n\n    try {\n      await createRepository(user === null || user === void 0 ? void 0 : user.id, url);\n      await loadData();\n    } catch (error) {\n      console.error(error);\n      setLoadingError(true);\n    }\n  };\n  /* if (loadingError) {\r\n      return (\r\n          <div className=\"loading\">\r\n              Erro ao carregar os dados de repositório. <Link to=\"/login\">Voltar</Link>.\r\n          </div>\r\n      )\r\n  } */\n\n  /* if (loading) {\r\n      return (\r\n          <div className=\"loading\">\r\n              Carregando...\r\n          </div>\r\n      )\r\n  } */\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(Nav, {\n      onLogout: handlelogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Repositories, {\n      repositories: repositories,\n      onDeleteRepo: handleDeleteRepo,\n      onNewRepo: handleNewRepo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MainPage, \"XWOEvfOCKY1+iHdigCmVgihOz1o=\");\n\n_c = MainPage;\nexport default MainPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","AuthContext","Nav","Search","Repositories","getRepositories","createRepository","destroyRepository","MainPage","user","logout","repositories","setRepositories","loading","setLoading","loadingError","setLoadingError","loadData","query","response","id","data","error","console","handlelogout","log","handleSearch","handleDeleteRepo","repository","_id","handleNewRepo","url"],"sources":["C:/Users/Tiago - DARM/Documents/GitHub/react-nodejs-frontend/src/pages/MainPage/index.jsx"],"sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { AuthContext } from '../../contexts/auth';\r\n\r\nimport Nav from './Nav';\r\nimport Search from './Search';\r\nimport Repositories from './Repositories';\r\n\r\nimport { getRepositories, createRepository, destroyRepository} from '../../services/api';\r\n\r\nimport \"./styles.css\"\r\n\r\nconst MainPage = () => {\r\n    const {user, logout} = useContext(AuthContext);\r\n    const [repositories, setRepositories] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [loadingError, setLoadingError] = useState(false);\r\n\r\n    const loadData = async (query = \"\") => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await getRepositories(user?.id, query);\r\n            setRepositories(response.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error(error);\r\n            setLoadingError(true);\r\n        }\r\n\r\n    }\r\n\r\n    /* useEffect(() => {\r\n        (async () => await loadData())();\r\n    }, []) */\r\n\r\n    const handlelogout = () => {\r\n        console.log(\"logout\")\r\n        logout()\r\n    }\r\n\r\n    const handleSearch = (query) => {\r\n        loadData(query)\r\n    }\r\n\r\n    const handleDeleteRepo = async (repository) => {\r\n        console.log(\"delete repo\", repository)\r\n        await destroyRepository(user?.id, repository._id)\r\n        await loadData()\r\n    }\r\n\r\n    const handleNewRepo = async (url) => {\r\n        console.log(\"new repo\", url)\r\n        try {\r\n            await createRepository(user?.id, url);\r\n            await loadData();\r\n\r\n        } catch (error) {\r\n            console.error(error);\r\n            setLoadingError(true);\r\n        }\r\n    }\r\n\r\n    /* if (loadingError) {\r\n        return (\r\n            <div className=\"loading\">\r\n                Erro ao carregar os dados de repositório. <Link to=\"/login\">Voltar</Link>.\r\n            </div>\r\n        )\r\n    } */\r\n    \r\n    /* if (loading) {\r\n        return (\r\n            <div className=\"loading\">\r\n                Carregando...\r\n            </div>\r\n        )\r\n    } */\r\n\r\n    return ( \r\n        <div id=\"main\">\r\n            <Nav onLogout={ handlelogout } />\r\n\r\n            <Search onSearch={ handleSearch } />\r\n\r\n            <Repositories\r\n                repositories={repositories}\r\n                onDeleteRepo={ handleDeleteRepo }\r\n                onNewRepo={handleNewRepo}\r\n            />\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default MainPage;\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}